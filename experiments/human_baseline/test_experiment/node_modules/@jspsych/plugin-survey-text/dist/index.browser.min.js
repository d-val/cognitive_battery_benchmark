var jsPsychSurveyText=function(e){"use strict";function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,s=function(){};return{s:s,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}var a={name:"survey-text",parameters:{questions:{type:e.ParameterType.COMPLEX,array:!0,pretty_name:"Questions",default:void 0,nested:{prompt:{type:e.ParameterType.HTML_STRING,pretty_name:"Prompt",default:void 0},placeholder:{type:e.ParameterType.STRING,pretty_name:"Placeholder",default:""},rows:{type:e.ParameterType.INT,pretty_name:"Rows",default:1},columns:{type:e.ParameterType.INT,pretty_name:"Columns",default:40},required:{type:e.ParameterType.BOOL,pretty_name:"Required",default:!1},name:{type:e.ParameterType.STRING,pretty_name:"Question Name",default:""}}},randomize_question_order:{type:e.ParameterType.BOOL,pretty_name:"Randomize Question Order",default:!1},preamble:{type:e.ParameterType.HTML_STRING,pretty_name:"Preamble",default:null},button_label:{type:e.ParameterType.STRING,pretty_name:"Button label",default:"Continue"},autocomplete:{type:e.ParameterType.BOOL,pretty_name:"Allow autocomplete",default:!1}}},s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t}var r,a,s;return r=e,(a=[{key:"trial",value:function(e,t){for(var r=this,n=0;n<t.questions.length;n++)void 0===t.questions[n].rows&&(t.questions[n].rows=1);for(n=0;n<t.questions.length;n++)void 0===t.questions[n].columns&&(t.questions[n].columns=40);for(n=0;n<t.questions.length;n++)void 0===t.questions[n].value&&(t.questions[n].value="");var a="";null!==t.preamble&&(a+='<div id="jspsych-survey-text-preamble" class="jspsych-survey-text-preamble">'+t.preamble+"</div>"),t.autocomplete?a+='<form id="jspsych-survey-text-form">':a+='<form id="jspsych-survey-text-form" autocomplete="off">';var s=[];for(n=0;n<t.questions.length;n++)s.push(n);for(t.randomize_question_order&&(s=this.jsPsych.randomization.shuffle(s)),n=0;n<t.questions.length;n++){var o=t.questions[s[n]],i=s[n];a+='<div id="jspsych-survey-text-'+i+'" class="jspsych-survey-text-question" style="margin: 2em 0em;">',a+='<p class="jspsych-survey-text">'+o.prompt+"</p>";var u=0==n?"autofocus":"",l=o.required?"required":"";1==o.rows?a+='<input type="text" id="input-'+i+'"  name="#jspsych-survey-text-response-'+i+'" data-name="'+o.name+'" size="'+o.columns+'" '+u+" "+l+' placeholder="'+o.placeholder+'"></input>':a+='<textarea id="input-'+i+'" name="#jspsych-survey-text-response-'+i+'" data-name="'+o.name+'" cols="'+o.columns+'" rows="'+o.rows+'" '+u+" "+l+' placeholder="'+o.placeholder+'"></textarea>',a+="</div>"}a+='<input type="submit" id="jspsych-survey-text-next" class="jspsych-btn jspsych-survey-text" value="'+t.button_label+'"></input>',a+="</form>",e.innerHTML=a,e.querySelector("#input-"+s[0]).focus(),e.querySelector("#jspsych-survey-text-form").addEventListener("submit",(function(n){n.preventDefault();for(var a=performance.now(),s=Math.round(a-y),o={},i=0;i<t.questions.length;i++){var u="Q"+i,l=document.querySelector("#jspsych-survey-text-"+i).querySelector("textarea, input"),c=l.value,p=l.attributes["data-name"].value;""==p&&(p=u);var m={};m[p]=c,Object.assign(o,m)}var f={rt:s,response:o};e.innerHTML="",r.jsPsych.finishTrial(f)}));var y=performance.now()}},{key:"simulate",value:function(e,t,r,n){"data-only"==t&&(n(),this.simulate_data_only(e,r)),"visual"==t&&this.simulate_visual(e,r,n)}},{key:"create_simulation_data",value:function(e,t){var r,a={},s=1e3,o=n(e.questions);try{for(o.s();!(r=o.n()).done;){var i=r.value,u=i.name?i.name:"Q".concat(e.questions.indexOf(i)),l=1==i.rows?this.jsPsych.randomization.sampleExponential(.25):this.jsPsych.randomization.randomInt(1,10)*i.rows;a[u]=this.jsPsych.randomization.randomWords({exactly:l,join:" "}),s+=this.jsPsych.randomization.sampleExGaussian(2e3,400,.004,!0)}}catch(e){o.e(e)}finally{o.f()}var y={response:a,rt:s},c=this.jsPsych.pluginAPI.mergeSimulationData(y,t);return this.jsPsych.pluginAPI.ensureSimulationDataConsistency(e,c),c}},{key:"simulate_data_only",value:function(e,t){var r=this.create_simulation_data(e,t);this.jsPsych.finishTrial(r)}},{key:"simulate_visual",value:function(e,t,r){var n=this.create_simulation_data(e,t),a=this.jsPsych.getDisplayElement();this.trial(a,e),r();for(var s=Object.entries(n.response).map((function(e){return e[1]})),o=0;o<s.length;o++)this.jsPsych.pluginAPI.fillTextInput(a.querySelector("#input-".concat(o)),s[o],(n.rt-1e3)/s.length*(o+1));this.jsPsych.pluginAPI.clickTarget(a.querySelector("#jspsych-survey-text-next"),n.rt)}}])&&t(r.prototype,a),s&&t(r,s),Object.defineProperty(r,"prototype",{writable:!1}),e}();return s.info=a,s}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
