var jsPsychWebgazerInitCamera=function(e){"use strict";function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n={name:"webgazer-init-camera",parameters:{instructions:{type:e.ParameterType.HTML_STRING,default:"\n            <p>Position your head so that the webcam has a good view of your eyes.</p>\n            <p>Center your face in the box and look directly towards the camera.</p>\n            <p>It is important that you try and keep your head reasonably still throughout the experiment, so please take a moment to adjust your setup to be comfortable.</p>\n            <p>When your face is centered in the box and the box is green, you can click to continue.</p>"},button_text:{type:e.ParameterType.STRING,default:"Continue"}}},r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.jsPsych=t}var n,r,o;return n=e,(r=[{key:"trial",value:function(e,t,n){var r,o,a=this,i=performance.now(),s=function(){if(n(),o=Math.round(performance.now()-i),document.querySelector("head").insertAdjacentHTML("beforeend",'\n          <style id="webgazer-center-style">\n            #webgazerVideoContainer { top: 20px !important; left: calc(50% - 160px) !important;}\n          </style>\n        '),e.innerHTML="\n          <div id='webgazer-init-container' style='position: relative; width:100vw; height:100vh'>\n          </div>",a.jsPsych.extensions.webgazer.showVideo(),a.jsPsych.extensions.webgazer.resume(),e.querySelector("#webgazer-init-container").innerHTML="\n          <div style='position: absolute; top: max(260px, 40%); left: calc(50% - 400px); width:800px;'>\n          ".concat(t.instructions,"\n          <button id='jspsych-wg-cont' class='jspsych-btn' disabled>").concat(t.button_text,"</button>\n          </div>"),document.querySelector("#webgazerFaceFeedbackBox")&&"green"==document.querySelector("#webgazerFaceFeedbackBox").style.borderColor)document.querySelector("#jspsych-wg-cont").disabled=!1;else{var s=new MutationObserver(c);s.observe(document,{attributes:!0,attributeFilter:["style"],subtree:!0})}document.querySelector("#jspsych-wg-cont").addEventListener("click",(function(){s&&s.disconnect(),function(){a.jsPsych.extensions.webgazer.pause(),a.jsPsych.extensions.webgazer.hideVideo(),a.jsPsych.pluginAPI.clearAllTimeouts();var t={load_time:o};e.innerHTML="",document.querySelector("#webgazer-center-style").remove(),a.jsPsych.finishTrial(t),r()}()}))};function c(e,t){e[0].target==document.querySelector("#webgazerFaceFeedbackBox")&&("attributes"==e[0].type&&"green"==e[0].target.style.borderColor&&(document.querySelector("#jspsych-wg-cont").disabled=!1),"attributes"==e[0].type&&"red"==e[0].target.style.borderColor&&(document.querySelector("#jspsych-wg-cont").disabled=!0))}return this.jsPsych.extensions.webgazer.isInitialized()?s():this.jsPsych.extensions.webgazer.start().then((function(){s()})).catch((function(t){console.log(t),e.innerHTML="<p>The experiment cannot continue because the eye tracker failed to start.</p>\n              <p>This may be because of a technical problem or because you did not grant permission for the page to use your camera.</p>"})),new Promise((function(e){r=e}))}}])&&t(n.prototype,r),o&&t(n,o),Object.defineProperty(n,"prototype",{writable:!1}),e}();return r.info=n,r}(jsPsychModule);
//# sourceMappingURL=index.browser.min.js.map
